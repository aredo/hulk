(function(d,e,f){var a=e.event,c;a.special.smartresize={setup:function(){e(this).bind("resize",a.special.smartresize.handler);},teardown:function(){e(this).unbind("resize",a.special.smartresize.handler);
},handler:function(j,g){var i=this,h=arguments;j.type="smartresize";if(c){clearTimeout(c);}c=setTimeout(function(){e.event.handle.apply(i,h);},g==="execAsap"?0:100);
}};e.fn.smartresize=function(g){return g?this.bind("smartresize",g):this.trigger("smartresize",["execAsap"]);};e.Mason=function(g,h){this.element=e(h);
this._create(g);this._init();};e.Mason.settings={isResizable:true,isAnimated:false,animationOptions:{queue:false,duration:500},gutterWidth:0,isRTL:false,isFitWidth:false,containerStyle:{position:"relative"}};
e.Mason.prototype={_filterFindBricks:function(h){var g=this.options.itemSelector;return !g?h:h.filter(g).add(h.find(g));},_getBricks:function(h){var g=this._filterFindBricks(h).css({position:"absolute"}).addClass("masonry-brick");
return g;},_create:function(i){this.options=e.extend(true,{},e.Mason.settings,i);this.styleQueue=[];var h=this.element[0].style;this.originalStyle={height:h.height||""};
var j=this.options.containerStyle;for(var k in j){this.originalStyle[k]=h[k]||"";}this.element.css(j);this.horizontalDirection=this.options.isRTL?"right":"left";
this.offset={x:parseInt(this.element.css("padding-"+this.horizontalDirection),10),y:parseInt(this.element.css("padding-top"),10)};this.isFluid=this.options.columnWidth&&typeof this.options.columnWidth==="function";
var g=this;setTimeout(function(){g.element.addClass("masonry");},0);if(this.options.isResizable){e(d).bind("smartresize.masonry",function(){g.resize();
});}this.reloadItems();},_init:function(g){this._getColumns();this._reLayout(g);},option:function(g,h){if(e.isPlainObject(g)){this.options=e.extend(true,this.options,g);
}},layout:function(o,p){for(var m=0,n=o.length;m<n;m++){this._placeBrick(o[m]);}var g={};g.height=Math.max.apply(Math,this.colYs);if(this.options.isFitWidth){var k=0;
m=this.cols;while(--m){if(this.colYs[m]!==0){break;}k++;}g.width=(this.cols-k)*this.columnWidth-this.options.gutterWidth;}this.styleQueue.push({$el:this.element,style:g});
var h=!this.isLaidOut?"css":(this.options.isAnimated?"animate":"css"),j=this.options.animationOptions;var l;for(m=0,n=this.styleQueue.length;m<n;m++){l=this.styleQueue[m];
l.$el[h](l.style,j);}this.styleQueue=[];if(p){p.call(o);}this.isLaidOut=true;},_getColumns:function(){var g=this.options.isFitWidth?this.element.parent():this.element,h=g.width();
this.columnWidth=this.isFluid?this.options.columnWidth(h):this.options.columnWidth||this.$bricks.outerWidth(true)||h;this.columnWidth+=this.options.gutterWidth;
this.cols=Math.floor((h+this.options.gutterWidth)/this.columnWidth);this.cols=Math.max(this.cols,1);},_placeBrick:function(p){var n=e(p),r,v,k,t,l;r=Math.ceil(n.outerWidth(true)/this.columnWidth);
r=Math.min(r,this.cols);if(r===1){k=this.colYs;}else{v=this.cols+1-r;k=[];for(l=0;l<v;l++){t=this.colYs.slice(l,l+r);k[l]=Math.max.apply(Math,t);}}var g=Math.min.apply(Math,k),u=0;
for(var m=0,q=k.length;m<q;m++){if(k[m]===g){u=m;break;}}var o={top:g+this.offset.y};o[this.horizontalDirection]=this.columnWidth*u+this.offset.x;this.styleQueue.push({$el:n,style:o});
var s=g+n.outerHeight(true),h=this.cols+1-q;for(m=0;m<h;m++){this.colYs[u+m]=s;}},resize:function(){var g=this.cols;this._getColumns();if(this.isFluid||this.cols!==g){this._reLayout();
}},_reLayout:function(h){var g=this.cols;this.colYs=[];while(g--){this.colYs.push(0);}this.layout(this.$bricks,h);},reloadItems:function(){this.$bricks=this._getBricks(this.element.children());
},reload:function(g){this.reloadItems();this._init(g);},appended:function(h,i,j){if(i){this._filterFindBricks(h).css({top:this.element.height()});var g=this;
setTimeout(function(){g._appended(h,j);},1);}else{this._appended(h,j);}},_appended:function(g,i){var h=this._getBricks(g);this.$bricks=this.$bricks.add(h);
this.layout(h,i);},remove:function(g){this.$bricks=this.$bricks.not(g);g.remove();},destroy:function(){this.$bricks.removeClass("masonry-brick").each(function(){this.style.position="";
this.style.top="";this.style.left="";});var g=this.element[0].style;for(var h in this.originalStyle){g[h]=this.originalStyle[h];}this.element.unbind(".masonry").removeClass("masonry").removeData("masonry");
e(d).unbind(".masonry");}};e.fn.imagesLoaded=function(n){var l=this,j=l.find("img").add(l.filter("img")),g=j.length,m="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",i=[];
function k(){n.call(l,j);}function h(p){var o=p.target;if(o.src!==m&&e.inArray(o,i)===-1){i.push(o);if(--g<=0){setTimeout(k);j.unbind(".imagesLoaded",h);
}}}if(!g){k();}j.bind("load.imagesLoaded error.imagesLoaded",h).each(function(){var o=this.src;this.src=m;this.src=o;});return l;};var b=function(g){if(d.console){d.console.error(g);
}};e.fn.masonry=function(h){if(typeof h==="string"){var g=Array.prototype.slice.call(arguments,1);this.each(function(){var i=e.data(this,"masonry");if(!i){b("cannot call methods on masonry prior to initialization; attempted to call method '"+h+"'");
return;}if(!e.isFunction(i[h])||h.charAt(0)==="_"){b("no such method '"+h+"' for masonry instance");return;}i[h].apply(i,g);});}else{this.each(function(){var i=e.data(this,"masonry");
if(i){i.option(h||{});i._init();}else{e.data(this,"masonry",new e.Mason(h,this));}});}return this;};})(window,jQuery);(function(n,i,k){i.infinitescroll=function y(B,D,C){this.element=i(C);
this._create(B,D);};i.infinitescroll.defaults={loading:{finished:k,finishedMsg:"<em>Congratulations, you've reached the end of the internet.</em>",img:"http://www.infinite-scroll.com/loading.gif",msg:null,msgText:"<em>Loading the next set of posts...</em>",selector:null,speed:"fast",start:k},state:{isDuringAjax:false,isInvalidPage:false,isDestroyed:false,isDone:false,isPaused:false,currPage:1},callback:k,debug:false,behavior:k,binder:i(n),nextSelector:"div.navigation a:first",navSelector:"div.navigation",contentSelector:null,extraScrollPx:150,itemSelector:"div.post",animate:false,pathParse:k,dataType:"html",appendCallback:true,bufferPx:40,errorCallback:function(){},infid:0,pixelsFromNavToBottom:k,path:k};
i.infinitescroll.prototype={_binding:function g(D){var B=this,C=B.options;if(!!C.behavior&&this["_binding_"+C.behavior]!==k){this["_binding_"+C.behavior].call(this);
return;}if(D!=="bind"&&D!=="unbind"){this._debug("Binding value  "+D+" not valid");return false;}if(D=="unbind"){(this.options.binder).unbind("smartscroll.infscr."+B.options.infid);
}else{(this.options.binder)[D]("smartscroll.infscr."+B.options.infid,function(){B.scroll();});}this._debug("Binding",D);},_create:function s(B,F){if(!this._validate(B)){return false;
}var C=this.options=i.extend(true,{},i.infinitescroll.defaults,B),E=/(.*?\/\/).*?(\/.*)/,D=i(C.nextSelector).attr("href");C.contentSelector=C.contentSelector||this.element;
C.loading.selector=C.loading.selector||C.contentSelector;if(!D){this._debug("Navigation selector not found");return;}C.path=this._determinepath(D);C.loading.msg=i('<div id="infscr-loading"><img alt="Loading..." src="'+C.loading.img+'" /><div>'+C.loading.msgText+"</div></div>");
(new Image()).src=C.loading.img;C.pixelsFromNavToBottom=i(document).height()-i(C.navSelector).offset().top;C.loading.start=C.loading.start||function(){i(C.navSelector).hide();
C.loading.msg.appendTo(C.loading.selector).show(C.loading.speed,function(){beginAjax(C);});};C.loading.finished=C.loading.finished||function(){C.loading.msg.fadeOut("normal");
};C.callback=function(G,H){if(!!C.behavior&&G["_callback_"+C.behavior]!==k){G["_callback_"+C.behavior].call(i(C.contentSelector)[0],H);}if(F){F.call(i(C.contentSelector)[0],H);
}};this._setup();},_debug:function p(){if(this.options.debug){return n.console&&console.log.call(console,arguments);}},_determinepath:function z(C){var B=this.options;
if(!!B.behavior&&this["_determinepath_"+B.behavior]!==k){this["_determinepath_"+B.behavior].call(this,C);return;}if(!!B.pathParse){this._debug("pathParse manual");
return B.pathParse;}else{if(C.match(/^(.*?)\b2\b(.*?$)/)){C=C.match(/^(.*?)\b2\b(.*?$)/).slice(1);}else{if(C.match(/^(.*?)2(.*?$)/)){if(C.match(/^(.*?page=)2(\/.*|$)/)){C=C.match(/^(.*?page=)2(\/.*|$)/).slice(1);
return C;}C=C.match(/^(.*?)2(.*?$)/).slice(1);}else{if(C.match(/^(.*?page=)1(\/.*|$)/)){C=C.match(/^(.*?page=)1(\/.*|$)/).slice(1);return C;}else{this._debug("Sorry, we couldn't parse your Next (Previous Posts) URL. Verify your the css selector points to the correct A tag. If you still get this error: yell, scream, and kindly ask for help at infinite-scroll.com.");
B.state.isInvalidPage=true;}}}}this._debug("determinePath",C);return C;},_error:function u(C){var B=this.options;if(!!B.behavior&&this["_error_"+B.behavior]!==k){this["_error_"+B.behavior].call(this,C);
return;}if(C!=="destroy"&&C!=="end"){C="unknown";}this._debug("Error",C);if(C=="end"){this._showdonemsg();}B.state.isDone=true;B.state.currPage=1;B.state.isPaused=false;
this._binding("unbind");},_loadcallback:function c(F,G){var E=this.options,I=this.options.callback,B=(E.state.isDone)?"done":(!E.appendCallback)?"no-append":"append",H;
if(!!E.behavior&&this["_loadcallback_"+E.behavior]!==k){this["_loadcallback_"+E.behavior].call(this,F,G);return;}switch(B){case"done":this._showdonemsg();
return false;break;case"no-append":if(E.dataType=="html"){G="<div>"+G+"</div>";G=i(G).find(E.itemSelector);}break;case"append":var D=F.children();if(D.length==0){return this._error("end");
}H=document.createDocumentFragment();while(F[0].firstChild){H.appendChild(F[0].firstChild);}this._debug("contentSelector",i(E.contentSelector)[0]);i(E.contentSelector)[0].appendChild(H);
G=D.get();break;}E.loading.finished.call(i(E.contentSelector)[0],E);if(E.animate){var C=i(n).scrollTop()+i("#infscr-loading").height()+E.extraScrollPx+"px";
i("html,body").animate({scrollTop:C},800,function(){E.state.isDuringAjax=false;});}if(!E.animate){E.state.isDuringAjax=false;}I(this,G);},_nearbottom:function t(){var C=this.options,B=0+i(document).height()-(C.binder.scrollTop())-i(n).height();
if(!!C.behavior&&this["_nearbottom_"+C.behavior]!==k){this["_nearbottom_"+C.behavior].call(this);return;}this._debug("math:",B,C.pixelsFromNavToBottom);
return(B-C.bufferPx<C.pixelsFromNavToBottom);},_pausing:function l(C){var B=this.options;if(!!B.behavior&&this["_pausing_"+B.behavior]!==k){this["_pausing_"+B.behavior].call(this,C);
return;}if(C!=="pause"&&C!=="resume"&&C!==null){this._debug("Invalid argument. Toggling pause value instead");}C=(C&&(C=="pause"||C=="resume"))?C:"toggle";
switch(C){case"pause":B.state.isPaused=true;break;case"resume":B.state.isPaused=false;break;case"toggle":B.state.isPaused=!B.state.isPaused;break;}this._debug("Paused",B.state.isPaused);
return false;},_setup:function q(){var B=this.options;if(!!B.behavior&&this["_setup_"+B.behavior]!==k){this["_setup_"+B.behavior].call(this);return;}this._binding("bind");
return false;},_showdonemsg:function a(){var B=this.options;if(!!B.behavior&&this["_showdonemsg_"+B.behavior]!==k){this["_showdonemsg_"+B.behavior].call(this);
return;}B.loading.msg.find("img").hide().parent().find("div").html(B.loading.finishedMsg).animate({opacity:1},2000,function(){i(this).parent().fadeOut("normal");
});B.errorCallback.call(i(B.contentSelector)[0],"done");},_validate:function v(C){for(var B in C){if(B.indexOf&&B.indexOf("Selector")>-1&&i(C[B]).length===0){this._debug("Your "+B+" found no elements.");
return false;}return true;}},bind:function o(){this._binding("bind");},destroy:function A(){this.options.state.isDestroyed=true;return this._error("destroy");
},pause:function e(){this._pausing("pause");},resume:function h(){this._pausing("resume");},retrieve:function b(H){var I=this,C=I.options,K=C.path,E,J,L,B,D,H=H||null,G=(!!H)?H:C.state.currPage;
beginAjax=function F(M){M.state.currPage++;I._debug("heading into ajax",K);E=i(M.contentSelector).is("table")?i("<tbody/>"):i("<div/>");L=K.join(M.state.currPage);
B=(M.dataType=="html"||M.dataType=="json")?M.dataType:"html+callback";if(M.appendCallback&&M.dataType=="html"){B+="+callback";}switch(B){case"html+callback":I._debug("Using HTML via .load() method");
E.load(L+" "+M.itemSelector,null,function N(O){I._loadcallback(E,O);});break;case"html":case"json":I._debug("Using "+(B.toUpperCase())+" via $.ajax() method");
i.ajax({url:L,dataType:M.dataType,complete:function N(O,P){D=(typeof(O.isResolved)!=="undefined")?(O.isResolved()):(P==="success"||P==="notmodified");(D)?I._loadcallback(E,O.responseText):I._error("end");
}});break;}};if(!!C.behavior&&this["retrieve_"+C.behavior]!==k){this["retrieve_"+C.behavior].call(this,H);return;}if(C.state.isDestroyed){this._debug("Instance is destroyed");
return false;}C.state.isDuringAjax=true;C.loading.start.call(i(C.contentSelector)[0],C);},scroll:function f(){var B=this.options,C=B.state;if(!!B.behavior&&this["scroll_"+B.behavior]!==k){this["scroll_"+B.behavior].call(this);
return;}if(C.isDuringAjax||C.isInvalidPage||C.isDone||C.isDestroyed||C.isPaused){return;}if(!this._nearbottom()){return;}this.retrieve();},toggle:function x(){this._pausing();
},unbind:function m(){this._binding("unbind");},update:function j(B){if(i.isPlainObject(B)){this.options=i.extend(true,this.options,B);}}};i.fn.infinitescroll=function d(D,E){var C=typeof D;
switch(C){case"string":var B=Array.prototype.slice.call(arguments,1);this.each(function(){var F=i.data(this,"infinitescroll");if(!F){return false;}if(!i.isFunction(F[D])||D.charAt(0)==="_"){return false;
}F[D].apply(F,B);});break;case"object":this.each(function(){var F=i.data(this,"infinitescroll");if(F){F.update(D);}else{i.data(this,"infinitescroll",new i.infinitescroll(D,E,this));
}});break;}return this;};var w=i.event,r;w.special.smartscroll={setup:function(){i(this).bind("scroll",w.special.smartscroll.handler);},teardown:function(){i(this).unbind("scroll",w.special.smartscroll.handler);
},handler:function(E,B){var D=this,C=arguments;E.type="smartscroll";if(r){clearTimeout(r);}r=setTimeout(function(){i.event.handle.apply(D,C);},B==="execAsap"?0:100);
}};i.fn.smartscroll=function(B){return B?this.bind("smartscroll",B):this.trigger("smartscroll",["execAsap"]);};})(window,jQuery);